#!/usr/bin/env bash
set -euo pipefail
cd "$(dirname "$0")/.."

# Frontend setup & watch build (background)
echo "==> Setting up frontend..."
cd client
npm install
npx vite build
echo "==> Starting frontend watch..."
npx vite build --watch &
cd ..

# Rust build & run
echo "==> Building server..."
cargo build

echo "==> Starting server..."
exec target/debug/novel-server
